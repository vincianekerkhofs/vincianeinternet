{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"usePlaybackEngine\", {\n    enumerable: true,\n    get: function () {\n      return usePlaybackEngine;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[1], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  /**\n   * Unified playback engine that handles:\n   * - Beat progression (single source of truth)\n   * - Metronome audio (Web Audio API)\n   * - Synced callbacks for UI updates\n   */\n  const usePlaybackEngine = options => {\n    const {\n      bpm,\n      totalBeats,\n      loop,\n      soundEnabled,\n      volume = 0.5,\n      onBeatChange,\n      onLoopComplete\n    } = options;\n\n    // State\n    const [isPlaying, setIsPlaying] = (0, _react.useState)(false);\n    const [currentBeat, setCurrentBeat] = (0, _react.useState)(1);\n    const [audioReady, setAudioReady] = (0, _react.useState)(false);\n    const [needsUserInteraction, setNeedsUserInteraction] = (0, _react.useState)(false);\n\n    // Refs for audio\n    const audioContextRef = (0, _react.useRef)(null);\n\n    // Refs for timing - single source of truth\n    const playbackStartTimeRef = (0, _react.useRef)(0);\n    const schedulerIdRef = (0, _react.useRef)(null);\n    const lastScheduledBeatRef = (0, _react.useRef)(0);\n    const isPlayingRef = (0, _react.useRef)(false);\n    const soundEnabledRef = (0, _react.useRef)(soundEnabled);\n\n    // Keep soundEnabled ref in sync\n    (0, _react.useEffect)(() => {\n      soundEnabledRef.current = soundEnabled;\n    }, [soundEnabled]);\n\n    // Initialize AudioContext\n    const initAudio = (0, _react.useCallback)(async () => {\n      if (Platform.default.OS !== 'web') {\n        setAudioReady(true);\n        return true;\n      }\n      try {\n        if (!audioContextRef.current) {\n          const AudioContextClass = window.AudioContext || window.webkitAudioContext;\n          if (AudioContextClass) {\n            audioContextRef.current = new AudioContextClass();\n          }\n        }\n        if (audioContextRef.current) {\n          if (audioContextRef.current.state === 'suspended') {\n            await audioContextRef.current.resume();\n          }\n          setAudioReady(true);\n          setNeedsUserInteraction(false);\n          return true;\n        }\n      } catch (error) {\n        console.error('Failed to initialize audio:', error);\n        setNeedsUserInteraction(true);\n      }\n      return false;\n    }, []);\n\n    // Play a click sound at specific time\n    const playClick = (0, _react.useCallback)((time, isAccent = false) => {\n      if (!audioContextRef.current || !soundEnabledRef.current) return;\n      const ctx = audioContextRef.current;\n      try {\n        const osc = ctx.createOscillator();\n        const gainNode = ctx.createGain();\n        osc.connect(gainNode);\n        gainNode.connect(ctx.destination);\n        osc.frequency.value = isAccent ? 1000 : 800;\n        osc.type = 'sine';\n        const attackTime = 0.001;\n        const decayTime = 0.05;\n        const clickVolume = volume * (isAccent ? 1 : 0.7);\n        gainNode.gain.setValueAtTime(0, time);\n        gainNode.gain.linearRampToValueAtTime(clickVolume, time + attackTime);\n        gainNode.gain.exponentialRampToValueAtTime(0.001, time + attackTime + decayTime);\n        osc.start(time);\n        osc.stop(time + attackTime + decayTime + 0.01);\n      } catch (e) {\n        // Ignore audio errors\n      }\n    }, [volume]);\n\n    // Main scheduler - runs continuously while playing\n    const runScheduler = (0, _react.useCallback)(() => {\n      if (!isPlayingRef.current) return;\n      const ctx = audioContextRef.current;\n      const now = ctx ? ctx.currentTime : Date.now() / 1000;\n      const secondsPerBeat = 60.0 / bpm;\n      const scheduleAheadTime = 0.15; // Schedule 150ms ahead\n      const lookaheadMs = 25; // Check every 25ms\n\n      // Calculate current beat based on elapsed time\n      const elapsedTime = now - playbackStartTimeRef.current;\n      const currentBeatFloat = elapsedTime / secondsPerBeat + 1;\n      const currentBeatInt = Math.floor(currentBeatFloat);\n\n      // Handle loop or stop\n      if (currentBeatInt > totalBeats) {\n        if (loop) {\n          // Reset start time for new loop\n          playbackStartTimeRef.current = now;\n          lastScheduledBeatRef.current = 0;\n          onLoopComplete?.();\n        } else {\n          stop();\n          return;\n        }\n      }\n\n      // Update current beat for UI (clamped to valid range)\n      const displayBeat = Math.max(1, Math.min(totalBeats, currentBeatInt));\n      setCurrentBeat(displayBeat);\n      onBeatChange?.(displayBeat);\n\n      // Schedule upcoming metronome clicks\n      if (ctx) {\n        const lookAheadBeats = Math.ceil((elapsedTime + scheduleAheadTime) / secondsPerBeat);\n        for (let beat = lastScheduledBeatRef.current + 1; beat <= lookAheadBeats && beat <= totalBeats; beat++) {\n          const beatTime = playbackStartTimeRef.current + (beat - 1) * secondsPerBeat;\n          if (beatTime >= now && beatTime < now + scheduleAheadTime) {\n            const isAccent = (beat - 1) % 4 === 0;\n            playClick(beatTime, isAccent);\n            lastScheduledBeatRef.current = beat;\n          }\n        }\n\n        // Handle loop scheduling\n        if (loop && lookAheadBeats > totalBeats) {\n          // Schedule beats for next loop iteration\n          const nextLoopStartTime = playbackStartTimeRef.current + totalBeats * secondsPerBeat;\n          const beatsIntoNextLoop = Math.ceil((now + scheduleAheadTime - nextLoopStartTime) / secondsPerBeat);\n          for (let beat = 1; beat <= beatsIntoNextLoop; beat++) {\n            const beatTime = nextLoopStartTime + (beat - 1) * secondsPerBeat;\n            if (beatTime >= now && beatTime < now + scheduleAheadTime) {\n              const isAccent = (beat - 1) % 4 === 0;\n              playClick(beatTime, isAccent);\n            }\n          }\n        }\n      }\n\n      // Continue scheduling\n      schedulerIdRef.current = window.setTimeout(runScheduler, lookaheadMs);\n    }, [bpm, totalBeats, loop, playClick, onBeatChange, onLoopComplete]);\n\n    // Start playback\n    const start = (0, _react.useCallback)(async () => {\n      // Initialize audio on first interaction\n      await initAudio();\n      const ctx = audioContextRef.current;\n      const now = ctx ? ctx.currentTime : Date.now() / 1000;\n\n      // Set start time\n      playbackStartTimeRef.current = now;\n      lastScheduledBeatRef.current = 0;\n      isPlayingRef.current = true;\n      setIsPlaying(true);\n      setCurrentBeat(1);\n\n      // Start scheduler\n      runScheduler();\n    }, [initAudio, runScheduler]);\n\n    // Stop playback\n    const stop = (0, _react.useCallback)(() => {\n      isPlayingRef.current = false;\n      setIsPlaying(false);\n      if (schedulerIdRef.current !== null) {\n        clearTimeout(schedulerIdRef.current);\n        schedulerIdRef.current = null;\n      }\n      setCurrentBeat(1);\n    }, []);\n\n    // Toggle play/pause\n    const toggle = (0, _react.useCallback)(() => {\n      if (isPlayingRef.current) {\n        stop();\n      } else {\n        start();\n      }\n    }, [start, stop]);\n\n    // Cleanup on unmount\n    (0, _react.useEffect)(() => {\n      return () => {\n        isPlayingRef.current = false;\n        if (schedulerIdRef.current !== null) {\n          clearTimeout(schedulerIdRef.current);\n        }\n        if (audioContextRef.current) {\n          audioContextRef.current.close();\n          audioContextRef.current = null;\n        }\n      };\n    }, []);\n\n    // Restart scheduler when BPM changes during playback\n    (0, _react.useEffect)(() => {\n      if (isPlayingRef.current && schedulerIdRef.current !== null) {\n        // The scheduler will pick up the new BPM automatically\n        // since it reads from the options on each run\n      }\n    }, [bpm]);\n    return {\n      isPlaying,\n      currentBeat,\n      audioReady,\n      needsUserInteraction,\n      start,\n      stop,\n      toggle,\n      initAudio\n    };\n  };\n});","lineCount":244,"map":[[12,2,20,0,"Object"],[12,8,20,0],[12,9,20,0,"defineProperty"],[12,23,20,0],[12,24,20,0,"exports"],[12,31,20,0],[13,4,20,0,"enumerable"],[13,14,20,0],[14,4,20,0,"get"],[14,7,20,0],[14,18,20,0,"get"],[14,19,20,0],[15,6,20,0],[15,13,20,0,"usePlaybackEngine"],[15,30,20,0],[16,4,20,0],[17,2,20,0],[18,2,1,0],[18,6,1,0,"_react"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,1,65],[19,6,1,65,"_reactNativeWebDistExportsPlatform"],[19,40,1,65],[19,43,1,65,"require"],[19,50,1,65],[19,51,1,65,"_dependencyMap"],[19,65,1,65],[20,2,1,65],[20,6,1,65,"Platform"],[20,14,1,65],[20,17,1,65,"_interopDefault"],[20,32,1,65],[20,33,1,65,"_reactNativeWebDistExportsPlatform"],[20,67,1,65],[21,2,14,0],[22,0,15,0],[23,0,16,0],[24,0,17,0],[25,0,18,0],[26,0,19,0],[27,2,20,7],[27,8,20,13,"usePlaybackEngine"],[27,25,20,30],[27,28,20,34,"options"],[27,35,20,64],[27,39,20,69],[28,4,21,2],[28,10,21,8],[29,6,22,4,"bpm"],[29,9,22,7],[30,6,23,4,"totalBeats"],[30,16,23,14],[31,6,24,4,"loop"],[31,10,24,8],[32,6,25,4,"soundEnabled"],[32,18,25,16],[33,6,26,4,"volume"],[33,12,26,10],[33,15,26,13],[33,18,26,16],[34,6,27,4,"onBeatChange"],[34,18,27,16],[35,6,28,4,"onLoopComplete"],[36,4,29,2],[36,5,29,3],[36,8,29,6,"options"],[36,15,29,13],[38,4,31,2],[39,4,32,2],[39,10,32,8],[39,11,32,9,"isPlaying"],[39,20,32,18],[39,22,32,20,"setIsPlaying"],[39,34,32,32],[39,35,32,33],[39,38,32,36],[39,42,32,36,"useState"],[39,48,32,44],[39,49,32,44,"useState"],[39,57,32,44],[39,59,32,45],[39,64,32,50],[39,65,32,51],[40,4,33,2],[40,10,33,8],[40,11,33,9,"currentBeat"],[40,22,33,20],[40,24,33,22,"setCurrentBeat"],[40,38,33,36],[40,39,33,37],[40,42,33,40],[40,46,33,40,"useState"],[40,52,33,48],[40,53,33,48,"useState"],[40,61,33,48],[40,63,33,49],[40,64,33,50],[40,65,33,51],[41,4,34,2],[41,10,34,8],[41,11,34,9,"audioReady"],[41,21,34,19],[41,23,34,21,"setAudioReady"],[41,36,34,34],[41,37,34,35],[41,40,34,38],[41,44,34,38,"useState"],[41,50,34,46],[41,51,34,46,"useState"],[41,59,34,46],[41,61,34,47],[41,66,34,52],[41,67,34,53],[42,4,35,2],[42,10,35,8],[42,11,35,9,"needsUserInteraction"],[42,31,35,29],[42,33,35,31,"setNeedsUserInteraction"],[42,56,35,54],[42,57,35,55],[42,60,35,58],[42,64,35,58,"useState"],[42,70,35,66],[42,71,35,66,"useState"],[42,79,35,66],[42,81,35,67],[42,86,35,72],[42,87,35,73],[44,4,37,2],[45,4,38,2],[45,10,38,8,"audioContextRef"],[45,25,38,23],[45,28,38,26],[45,32,38,26,"useRef"],[45,38,38,32],[45,39,38,32,"useRef"],[45,45,38,32],[45,47,38,54],[45,51,38,58],[45,52,38,59],[47,4,40,2],[48,4,41,2],[48,10,41,8,"playbackStartTimeRef"],[48,30,41,28],[48,33,41,31],[48,37,41,31,"useRef"],[48,43,41,37],[48,44,41,37,"useRef"],[48,50,41,37],[48,52,41,46],[48,53,41,47],[48,54,41,48],[49,4,42,2],[49,10,42,8,"schedulerIdRef"],[49,24,42,22],[49,27,42,25],[49,31,42,25,"useRef"],[49,37,42,31],[49,38,42,31,"useRef"],[49,44,42,31],[49,46,42,47],[49,50,42,51],[49,51,42,52],[50,4,43,2],[50,10,43,8,"lastScheduledBeatRef"],[50,30,43,28],[50,33,43,31],[50,37,43,31,"useRef"],[50,43,43,37],[50,44,43,37,"useRef"],[50,50,43,37],[50,52,43,46],[50,53,43,47],[50,54,43,48],[51,4,44,2],[51,10,44,8,"isPlayingRef"],[51,22,44,20],[51,25,44,23],[51,29,44,23,"useRef"],[51,35,44,29],[51,36,44,29,"useRef"],[51,42,44,29],[51,44,44,39],[51,49,44,44],[51,50,44,45],[52,4,45,2],[52,10,45,8,"soundEnabledRef"],[52,25,45,23],[52,28,45,26],[52,32,45,26,"useRef"],[52,38,45,32],[52,39,45,32,"useRef"],[52,45,45,32],[52,47,45,42,"soundEnabled"],[52,59,45,54],[52,60,45,55],[54,4,47,2],[55,4,48,2],[55,8,48,2,"useEffect"],[55,14,48,11],[55,15,48,11,"useEffect"],[55,24,48,11],[55,26,48,12],[55,32,48,18],[56,6,49,4,"soundEnabledRef"],[56,21,49,19],[56,22,49,20,"current"],[56,29,49,27],[56,32,49,30,"soundEnabled"],[56,44,49,42],[57,4,50,2],[57,5,50,3],[57,7,50,5],[57,8,50,6,"soundEnabled"],[57,20,50,18],[57,21,50,19],[57,22,50,20],[59,4,52,2],[60,4,53,2],[60,10,53,8,"initAudio"],[60,19,53,17],[60,22,53,20],[60,26,53,20,"useCallback"],[60,32,53,31],[60,33,53,31,"useCallback"],[60,44,53,31],[60,46,53,32],[60,58,53,44],[61,6,54,4],[61,10,54,8,"Platform"],[61,18,54,16],[61,19,54,16,"default"],[61,26,54,16],[61,27,54,17,"OS"],[61,29,54,19],[61,34,54,24],[61,39,54,29],[61,41,54,31],[62,8,55,6,"setAudioReady"],[62,21,55,19],[62,22,55,20],[62,26,55,24],[62,27,55,25],[63,8,56,6],[63,15,56,13],[63,19,56,17],[64,6,57,4],[65,6,59,4],[65,10,59,8],[66,8,60,6],[66,12,60,10],[66,13,60,11,"audioContextRef"],[66,28,60,26],[66,29,60,27,"current"],[66,36,60,34],[66,38,60,36],[67,10,61,8],[67,16,61,14,"AudioContextClass"],[67,33,61,31],[67,36,61,34,"window"],[67,42,61,40],[67,43,61,41,"AudioContext"],[67,55,61,53],[67,59,61,58,"window"],[67,65,61,64],[67,66,61,73,"webkitAudioContext"],[67,84,61,91],[68,10,62,8],[68,14,62,12,"AudioContextClass"],[68,31,62,29],[68,33,62,31],[69,12,63,10,"audioContextRef"],[69,27,63,25],[69,28,63,26,"current"],[69,35,63,33],[69,38,63,36],[69,42,63,40,"AudioContextClass"],[69,59,63,57],[69,60,63,58],[69,61,63,59],[70,10,64,8],[71,8,65,6],[72,8,67,6],[72,12,67,10,"audioContextRef"],[72,27,67,25],[72,28,67,26,"current"],[72,35,67,33],[72,37,67,35],[73,10,68,8],[73,14,68,12,"audioContextRef"],[73,29,68,27],[73,30,68,28,"current"],[73,37,68,35],[73,38,68,36,"state"],[73,43,68,41],[73,48,68,46],[73,59,68,57],[73,61,68,59],[74,12,69,10],[74,18,69,16,"audioContextRef"],[74,33,69,31],[74,34,69,32,"current"],[74,41,69,39],[74,42,69,40,"resume"],[74,48,69,46],[74,49,69,47],[74,50,69,48],[75,10,70,8],[76,10,71,8,"setAudioReady"],[76,23,71,21],[76,24,71,22],[76,28,71,26],[76,29,71,27],[77,10,72,8,"setNeedsUserInteraction"],[77,33,72,31],[77,34,72,32],[77,39,72,37],[77,40,72,38],[78,10,73,8],[78,17,73,15],[78,21,73,19],[79,8,74,6],[80,6,75,4],[80,7,75,5],[80,8,75,6],[80,15,75,13,"error"],[80,20,75,18],[80,22,75,20],[81,8,76,6,"console"],[81,15,76,13],[81,16,76,14,"error"],[81,21,76,19],[81,22,76,20],[81,51,76,49],[81,53,76,51,"error"],[81,58,76,56],[81,59,76,57],[82,8,77,6,"setNeedsUserInteraction"],[82,31,77,29],[82,32,77,30],[82,36,77,34],[82,37,77,35],[83,6,78,4],[84,6,79,4],[84,13,79,11],[84,18,79,16],[85,4,80,2],[85,5,80,3],[85,7,80,5],[85,9,80,7],[85,10,80,8],[87,4,82,2],[88,4,83,2],[88,10,83,8,"playClick"],[88,19,83,17],[88,22,83,20],[88,26,83,20,"useCallback"],[88,32,83,31],[88,33,83,31,"useCallback"],[88,44,83,31],[88,46,83,32],[88,47,83,33,"time"],[88,51,83,45],[88,53,83,47,"isAccent"],[88,61,83,64],[88,64,83,67],[88,69,83,72],[88,74,83,77],[89,6,84,4],[89,10,84,8],[89,11,84,9,"audioContextRef"],[89,26,84,24],[89,27,84,25,"current"],[89,34,84,32],[89,38,84,36],[89,39,84,37,"soundEnabledRef"],[89,54,84,52],[89,55,84,53,"current"],[89,62,84,60],[89,64,84,62],[90,6,86,4],[90,12,86,10,"ctx"],[90,15,86,13],[90,18,86,16,"audioContextRef"],[90,33,86,31],[90,34,86,32,"current"],[90,41,86,39],[91,6,88,4],[91,10,88,8],[92,8,89,6],[92,14,89,12,"osc"],[92,17,89,15],[92,20,89,18,"ctx"],[92,23,89,21],[92,24,89,22,"createOscillator"],[92,40,89,38],[92,41,89,39],[92,42,89,40],[93,8,90,6],[93,14,90,12,"gainNode"],[93,22,90,20],[93,25,90,23,"ctx"],[93,28,90,26],[93,29,90,27,"createGain"],[93,39,90,37],[93,40,90,38],[93,41,90,39],[94,8,92,6,"osc"],[94,11,92,9],[94,12,92,10,"connect"],[94,19,92,17],[94,20,92,18,"gainNode"],[94,28,92,26],[94,29,92,27],[95,8,93,6,"gainNode"],[95,16,93,14],[95,17,93,15,"connect"],[95,24,93,22],[95,25,93,23,"ctx"],[95,28,93,26],[95,29,93,27,"destination"],[95,40,93,38],[95,41,93,39],[96,8,95,6,"osc"],[96,11,95,9],[96,12,95,10,"frequency"],[96,21,95,19],[96,22,95,20,"value"],[96,27,95,25],[96,30,95,28,"isAccent"],[96,38,95,36],[96,41,95,39],[96,45,95,43],[96,48,95,46],[96,51,95,49],[97,8,96,6,"osc"],[97,11,96,9],[97,12,96,10,"type"],[97,16,96,14],[97,19,96,17],[97,25,96,23],[98,8,98,6],[98,14,98,12,"attackTime"],[98,24,98,22],[98,27,98,25],[98,32,98,30],[99,8,99,6],[99,14,99,12,"decayTime"],[99,23,99,21],[99,26,99,24],[99,30,99,28],[100,8,100,6],[100,14,100,12,"clickVolume"],[100,25,100,23],[100,28,100,26,"volume"],[100,34,100,32],[100,38,100,36,"isAccent"],[100,46,100,44],[100,49,100,47],[100,50,100,48],[100,53,100,51],[100,56,100,54],[100,57,100,55],[101,8,102,6,"gainNode"],[101,16,102,14],[101,17,102,15,"gain"],[101,21,102,19],[101,22,102,20,"setValueAtTime"],[101,36,102,34],[101,37,102,35],[101,38,102,36],[101,40,102,38,"time"],[101,44,102,42],[101,45,102,43],[102,8,103,6,"gainNode"],[102,16,103,14],[102,17,103,15,"gain"],[102,21,103,19],[102,22,103,20,"linearRampToValueAtTime"],[102,45,103,43],[102,46,103,44,"clickVolume"],[102,57,103,55],[102,59,103,57,"time"],[102,63,103,61],[102,66,103,64,"attackTime"],[102,76,103,74],[102,77,103,75],[103,8,104,6,"gainNode"],[103,16,104,14],[103,17,104,15,"gain"],[103,21,104,19],[103,22,104,20,"exponentialRampToValueAtTime"],[103,50,104,48],[103,51,104,49],[103,56,104,54],[103,58,104,56,"time"],[103,62,104,60],[103,65,104,63,"attackTime"],[103,75,104,73],[103,78,104,76,"decayTime"],[103,87,104,85],[103,88,104,86],[104,8,106,6,"osc"],[104,11,106,9],[104,12,106,10,"start"],[104,17,106,15],[104,18,106,16,"time"],[104,22,106,20],[104,23,106,21],[105,8,107,6,"osc"],[105,11,107,9],[105,12,107,10,"stop"],[105,16,107,14],[105,17,107,15,"time"],[105,21,107,19],[105,24,107,22,"attackTime"],[105,34,107,32],[105,37,107,35,"decayTime"],[105,46,107,44],[105,49,107,47],[105,53,107,51],[105,54,107,52],[106,6,108,4],[106,7,108,5],[106,8,108,6],[106,15,108,13,"e"],[106,16,108,14],[106,18,108,16],[107,8,109,6],[108,6,109,6],[109,4,111,2],[109,5,111,3],[109,7,111,5],[109,8,111,6,"volume"],[109,14,111,12],[109,15,111,13],[109,16,111,14],[111,4,113,2],[112,4,114,2],[112,10,114,8,"runScheduler"],[112,22,114,20],[112,25,114,23],[112,29,114,23,"useCallback"],[112,35,114,34],[112,36,114,34,"useCallback"],[112,47,114,34],[112,49,114,35],[112,55,114,41],[113,6,115,4],[113,10,115,8],[113,11,115,9,"isPlayingRef"],[113,23,115,21],[113,24,115,22,"current"],[113,31,115,29],[113,33,115,31],[114,6,117,4],[114,12,117,10,"ctx"],[114,15,117,13],[114,18,117,16,"audioContextRef"],[114,33,117,31],[114,34,117,32,"current"],[114,41,117,39],[115,6,118,4],[115,12,118,10,"now"],[115,15,118,13],[115,18,118,16,"ctx"],[115,21,118,19],[115,24,118,22,"ctx"],[115,27,118,25],[115,28,118,26,"currentTime"],[115,39,118,37],[115,42,118,41,"Date"],[115,46,118,45],[115,47,118,46,"now"],[115,50,118,49],[115,51,118,50],[115,52,118,51],[115,55,118,54],[115,59,118,59],[116,6,119,4],[116,12,119,10,"secondsPerBeat"],[116,26,119,24],[116,29,119,27],[116,33,119,31],[116,36,119,34,"bpm"],[116,39,119,37],[117,6,120,4],[117,12,120,10,"scheduleAheadTime"],[117,29,120,27],[117,32,120,30],[117,36,120,34],[117,37,120,35],[117,38,120,36],[118,6,121,4],[118,12,121,10,"lookaheadMs"],[118,23,121,21],[118,26,121,24],[118,28,121,26],[118,29,121,27],[118,30,121,28],[120,6,123,4],[121,6,124,4],[121,12,124,10,"elapsedTime"],[121,23,124,21],[121,26,124,24,"now"],[121,29,124,27],[121,32,124,30,"playbackStartTimeRef"],[121,52,124,50],[121,53,124,51,"current"],[121,60,124,58],[122,6,125,4],[122,12,125,10,"currentBeatFloat"],[122,28,125,26],[122,31,125,30,"elapsedTime"],[122,42,125,41],[122,45,125,44,"secondsPerBeat"],[122,59,125,58],[122,62,125,62],[122,63,125,63],[123,6,126,4],[123,12,126,10,"currentBeatInt"],[123,26,126,24],[123,29,126,27,"Math"],[123,33,126,31],[123,34,126,32,"floor"],[123,39,126,37],[123,40,126,38,"currentBeatFloat"],[123,56,126,54],[123,57,126,55],[125,6,128,4],[126,6,129,4],[126,10,129,8,"currentBeatInt"],[126,24,129,22],[126,27,129,25,"totalBeats"],[126,37,129,35],[126,39,129,37],[127,8,130,6],[127,12,130,10,"loop"],[127,16,130,14],[127,18,130,16],[128,10,131,8],[129,10,132,8,"playbackStartTimeRef"],[129,30,132,28],[129,31,132,29,"current"],[129,38,132,36],[129,41,132,39,"now"],[129,44,132,42],[130,10,133,8,"lastScheduledBeatRef"],[130,30,133,28],[130,31,133,29,"current"],[130,38,133,36],[130,41,133,39],[130,42,133,40],[131,10,134,8,"onLoopComplete"],[131,24,134,22],[131,27,134,25],[131,28,134,26],[132,8,135,6],[132,9,135,7],[132,15,135,13],[133,10,136,8,"stop"],[133,14,136,12],[133,15,136,13],[133,16,136,14],[134,10,137,8],[135,8,138,6],[136,6,139,4],[138,6,141,4],[139,6,142,4],[139,12,142,10,"displayBeat"],[139,23,142,21],[139,26,142,24,"Math"],[139,30,142,28],[139,31,142,29,"max"],[139,34,142,32],[139,35,142,33],[139,36,142,34],[139,38,142,36,"Math"],[139,42,142,40],[139,43,142,41,"min"],[139,46,142,44],[139,47,142,45,"totalBeats"],[139,57,142,55],[139,59,142,57,"currentBeatInt"],[139,73,142,71],[139,74,142,72],[139,75,142,73],[140,6,143,4,"setCurrentBeat"],[140,20,143,18],[140,21,143,19,"displayBeat"],[140,32,143,30],[140,33,143,31],[141,6,144,4,"onBeatChange"],[141,18,144,16],[141,21,144,19,"displayBeat"],[141,32,144,30],[141,33,144,31],[143,6,146,4],[144,6,147,4],[144,10,147,8,"ctx"],[144,13,147,11],[144,15,147,13],[145,8,148,6],[145,14,148,12,"lookAheadBeats"],[145,28,148,26],[145,31,148,29,"Math"],[145,35,148,33],[145,36,148,34,"ceil"],[145,40,148,38],[145,41,148,39],[145,42,148,40,"elapsedTime"],[145,53,148,51],[145,56,148,54,"scheduleAheadTime"],[145,73,148,71],[145,77,148,75,"secondsPerBeat"],[145,91,148,89],[145,92,148,90],[146,8,150,6],[146,13,150,11],[146,17,150,15,"beat"],[146,21,150,19],[146,24,150,22,"lastScheduledBeatRef"],[146,44,150,42],[146,45,150,43,"current"],[146,52,150,50],[146,55,150,53],[146,56,150,54],[146,58,150,56,"beat"],[146,62,150,60],[146,66,150,64,"lookAheadBeats"],[146,80,150,78],[146,84,150,82,"beat"],[146,88,150,86],[146,92,150,90,"totalBeats"],[146,102,150,100],[146,104,150,102,"beat"],[146,108,150,106],[146,110,150,108],[146,112,150,110],[147,10,151,8],[147,16,151,14,"beatTime"],[147,24,151,22],[147,27,151,25,"playbackStartTimeRef"],[147,47,151,45],[147,48,151,46,"current"],[147,55,151,53],[147,58,151,57],[147,59,151,58,"beat"],[147,63,151,62],[147,66,151,65],[147,67,151,66],[147,71,151,70,"secondsPerBeat"],[147,85,151,85],[148,10,153,8],[148,14,153,12,"beatTime"],[148,22,153,20],[148,26,153,24,"now"],[148,29,153,27],[148,33,153,31,"beatTime"],[148,41,153,39],[148,44,153,42,"now"],[148,47,153,45],[148,50,153,48,"scheduleAheadTime"],[148,67,153,65],[148,69,153,67],[149,12,154,10],[149,18,154,16,"isAccent"],[149,26,154,24],[149,29,154,27],[149,30,154,28,"beat"],[149,34,154,32],[149,37,154,35],[149,38,154,36],[149,42,154,40],[149,43,154,41],[149,48,154,46],[149,49,154,47],[150,12,155,10,"playClick"],[150,21,155,19],[150,22,155,20,"beatTime"],[150,30,155,28],[150,32,155,30,"isAccent"],[150,40,155,38],[150,41,155,39],[151,12,156,10,"lastScheduledBeatRef"],[151,32,156,30],[151,33,156,31,"current"],[151,40,156,38],[151,43,156,41,"beat"],[151,47,156,45],[152,10,157,8],[153,8,158,6],[155,8,160,6],[156,8,161,6],[156,12,161,10,"loop"],[156,16,161,14],[156,20,161,18,"lookAheadBeats"],[156,34,161,32],[156,37,161,35,"totalBeats"],[156,47,161,45],[156,49,161,47],[157,10,162,8],[158,10,163,8],[158,16,163,14,"nextLoopStartTime"],[158,33,163,31],[158,36,163,34,"playbackStartTimeRef"],[158,56,163,54],[158,57,163,55,"current"],[158,64,163,62],[158,67,163,66,"totalBeats"],[158,77,163,76],[158,80,163,79,"secondsPerBeat"],[158,94,163,94],[159,10,164,8],[159,16,164,14,"beatsIntoNextLoop"],[159,33,164,31],[159,36,164,34,"Math"],[159,40,164,38],[159,41,164,39,"ceil"],[159,45,164,43],[159,46,164,44],[159,47,164,45,"now"],[159,50,164,48],[159,53,164,51,"scheduleAheadTime"],[159,70,164,68],[159,73,164,71,"nextLoopStartTime"],[159,90,164,88],[159,94,164,92,"secondsPerBeat"],[159,108,164,106],[159,109,164,107],[160,10,166,8],[160,15,166,13],[160,19,166,17,"beat"],[160,23,166,21],[160,26,166,24],[160,27,166,25],[160,29,166,27,"beat"],[160,33,166,31],[160,37,166,35,"beatsIntoNextLoop"],[160,54,166,52],[160,56,166,54,"beat"],[160,60,166,58],[160,62,166,60],[160,64,166,62],[161,12,167,10],[161,18,167,16,"beatTime"],[161,26,167,24],[161,29,167,27,"nextLoopStartTime"],[161,46,167,44],[161,49,167,48],[161,50,167,49,"beat"],[161,54,167,53],[161,57,167,56],[161,58,167,57],[161,62,167,61,"secondsPerBeat"],[161,76,167,76],[162,12,168,10],[162,16,168,14,"beatTime"],[162,24,168,22],[162,28,168,26,"now"],[162,31,168,29],[162,35,168,33,"beatTime"],[162,43,168,41],[162,46,168,44,"now"],[162,49,168,47],[162,52,168,50,"scheduleAheadTime"],[162,69,168,67],[162,71,168,69],[163,14,169,12],[163,20,169,18,"isAccent"],[163,28,169,26],[163,31,169,29],[163,32,169,30,"beat"],[163,36,169,34],[163,39,169,37],[163,40,169,38],[163,44,169,42],[163,45,169,43],[163,50,169,48],[163,51,169,49],[164,14,170,12,"playClick"],[164,23,170,21],[164,24,170,22,"beatTime"],[164,32,170,30],[164,34,170,32,"isAccent"],[164,42,170,40],[164,43,170,41],[165,12,171,10],[166,10,172,8],[167,8,173,6],[168,6,174,4],[170,6,176,4],[171,6,177,4,"schedulerIdRef"],[171,20,177,18],[171,21,177,19,"current"],[171,28,177,26],[171,31,177,29,"window"],[171,37,177,35],[171,38,177,36,"setTimeout"],[171,48,177,46],[171,49,177,47,"runScheduler"],[171,61,177,59],[171,63,177,61,"lookaheadMs"],[171,74,177,72],[171,75,177,73],[172,4,178,2],[172,5,178,3],[172,7,178,5],[172,8,178,6,"bpm"],[172,11,178,9],[172,13,178,11,"totalBeats"],[172,23,178,21],[172,25,178,23,"loop"],[172,29,178,27],[172,31,178,29,"playClick"],[172,40,178,38],[172,42,178,40,"onBeatChange"],[172,54,178,52],[172,56,178,54,"onLoopComplete"],[172,70,178,68],[172,71,178,69],[172,72,178,70],[174,4,180,2],[175,4,181,2],[175,10,181,8,"start"],[175,15,181,13],[175,18,181,16],[175,22,181,16,"useCallback"],[175,28,181,27],[175,29,181,27,"useCallback"],[175,40,181,27],[175,42,181,28],[175,54,181,40],[176,6,182,4],[177,6,183,4],[177,12,183,10,"initAudio"],[177,21,183,19],[177,22,183,20],[177,23,183,21],[178,6,185,4],[178,12,185,10,"ctx"],[178,15,185,13],[178,18,185,16,"audioContextRef"],[178,33,185,31],[178,34,185,32,"current"],[178,41,185,39],[179,6,186,4],[179,12,186,10,"now"],[179,15,186,13],[179,18,186,16,"ctx"],[179,21,186,19],[179,24,186,22,"ctx"],[179,27,186,25],[179,28,186,26,"currentTime"],[179,39,186,37],[179,42,186,41,"Date"],[179,46,186,45],[179,47,186,46,"now"],[179,50,186,49],[179,51,186,50],[179,52,186,51],[179,55,186,54],[179,59,186,59],[181,6,188,4],[182,6,189,4,"playbackStartTimeRef"],[182,26,189,24],[182,27,189,25,"current"],[182,34,189,32],[182,37,189,35,"now"],[182,40,189,38],[183,6,190,4,"lastScheduledBeatRef"],[183,26,190,24],[183,27,190,25,"current"],[183,34,190,32],[183,37,190,35],[183,38,190,36],[184,6,191,4,"isPlayingRef"],[184,18,191,16],[184,19,191,17,"current"],[184,26,191,24],[184,29,191,27],[184,33,191,31],[185,6,193,4,"setIsPlaying"],[185,18,193,16],[185,19,193,17],[185,23,193,21],[185,24,193,22],[186,6,194,4,"setCurrentBeat"],[186,20,194,18],[186,21,194,19],[186,22,194,20],[186,23,194,21],[188,6,196,4],[189,6,197,4,"runScheduler"],[189,18,197,16],[189,19,197,17],[189,20,197,18],[190,4,198,2],[190,5,198,3],[190,7,198,5],[190,8,198,6,"initAudio"],[190,17,198,15],[190,19,198,17,"runScheduler"],[190,31,198,29],[190,32,198,30],[190,33,198,31],[192,4,200,2],[193,4,201,2],[193,10,201,8,"stop"],[193,14,201,12],[193,17,201,15],[193,21,201,15,"useCallback"],[193,27,201,26],[193,28,201,26,"useCallback"],[193,39,201,26],[193,41,201,27],[193,47,201,33],[194,6,202,4,"isPlayingRef"],[194,18,202,16],[194,19,202,17,"current"],[194,26,202,24],[194,29,202,27],[194,34,202,32],[195,6,203,4,"setIsPlaying"],[195,18,203,16],[195,19,203,17],[195,24,203,22],[195,25,203,23],[196,6,205,4],[196,10,205,8,"schedulerIdRef"],[196,24,205,22],[196,25,205,23,"current"],[196,32,205,30],[196,37,205,35],[196,41,205,39],[196,43,205,41],[197,8,206,6,"clearTimeout"],[197,20,206,18],[197,21,206,19,"schedulerIdRef"],[197,35,206,33],[197,36,206,34,"current"],[197,43,206,41],[197,44,206,42],[198,8,207,6,"schedulerIdRef"],[198,22,207,20],[198,23,207,21,"current"],[198,30,207,28],[198,33,207,31],[198,37,207,35],[199,6,208,4],[200,6,210,4,"setCurrentBeat"],[200,20,210,18],[200,21,210,19],[200,22,210,20],[200,23,210,21],[201,4,211,2],[201,5,211,3],[201,7,211,5],[201,9,211,7],[201,10,211,8],[203,4,213,2],[204,4,214,2],[204,10,214,8,"toggle"],[204,16,214,14],[204,19,214,17],[204,23,214,17,"useCallback"],[204,29,214,28],[204,30,214,28,"useCallback"],[204,41,214,28],[204,43,214,29],[204,49,214,35],[205,6,215,4],[205,10,215,8,"isPlayingRef"],[205,22,215,20],[205,23,215,21,"current"],[205,30,215,28],[205,32,215,30],[206,8,216,6,"stop"],[206,12,216,10],[206,13,216,11],[206,14,216,12],[207,6,217,4],[207,7,217,5],[207,13,217,11],[208,8,218,6,"start"],[208,13,218,11],[208,14,218,12],[208,15,218,13],[209,6,219,4],[210,4,220,2],[210,5,220,3],[210,7,220,5],[210,8,220,6,"start"],[210,13,220,11],[210,15,220,13,"stop"],[210,19,220,17],[210,20,220,18],[210,21,220,19],[212,4,222,2],[213,4,223,2],[213,8,223,2,"useEffect"],[213,14,223,11],[213,15,223,11,"useEffect"],[213,24,223,11],[213,26,223,12],[213,32,223,18],[214,6,224,4],[214,13,224,11],[214,19,224,17],[215,8,225,6,"isPlayingRef"],[215,20,225,18],[215,21,225,19,"current"],[215,28,225,26],[215,31,225,29],[215,36,225,34],[216,8,226,6],[216,12,226,10,"schedulerIdRef"],[216,26,226,24],[216,27,226,25,"current"],[216,34,226,32],[216,39,226,37],[216,43,226,41],[216,45,226,43],[217,10,227,8,"clearTimeout"],[217,22,227,20],[217,23,227,21,"schedulerIdRef"],[217,37,227,35],[217,38,227,36,"current"],[217,45,227,43],[217,46,227,44],[218,8,228,6],[219,8,229,6],[219,12,229,10,"audioContextRef"],[219,27,229,25],[219,28,229,26,"current"],[219,35,229,33],[219,37,229,35],[220,10,230,8,"audioContextRef"],[220,25,230,23],[220,26,230,24,"current"],[220,33,230,31],[220,34,230,32,"close"],[220,39,230,37],[220,40,230,38],[220,41,230,39],[221,10,231,8,"audioContextRef"],[221,25,231,23],[221,26,231,24,"current"],[221,33,231,31],[221,36,231,34],[221,40,231,38],[222,8,232,6],[223,6,233,4],[223,7,233,5],[224,4,234,2],[224,5,234,3],[224,7,234,5],[224,9,234,7],[224,10,234,8],[226,4,236,2],[227,4,237,2],[227,8,237,2,"useEffect"],[227,14,237,11],[227,15,237,11,"useEffect"],[227,24,237,11],[227,26,237,12],[227,32,237,18],[228,6,238,4],[228,10,238,8,"isPlayingRef"],[228,22,238,20],[228,23,238,21,"current"],[228,30,238,28],[228,34,238,32,"schedulerIdRef"],[228,48,238,46],[228,49,238,47,"current"],[228,56,238,54],[228,61,238,59],[228,65,238,63],[228,67,238,65],[229,8,239,6],[230,8,240,6],[231,6,240,6],[232,4,242,2],[232,5,242,3],[232,7,242,5],[232,8,242,6,"bpm"],[232,11,242,9],[232,12,242,10],[232,13,242,11],[233,4,244,2],[233,11,244,9],[234,6,245,4,"isPlaying"],[234,15,245,13],[235,6,246,4,"currentBeat"],[235,17,246,15],[236,6,247,4,"audioReady"],[236,16,247,14],[237,6,248,4,"needsUserInteraction"],[237,26,248,24],[238,6,249,4,"start"],[238,11,249,9],[239,6,250,4,"stop"],[239,10,250,8],[240,6,251,4,"toggle"],[240,12,251,10],[241,6,252,4,"initAudio"],[242,4,253,2],[242,5,253,3],[243,2,254,0],[243,3,254,1],[244,0,254,2],[244,3]],"functionMap":{"names":["<global>","usePlaybackEngine","useEffect$argument_0","initAudio","playClick","runScheduler","start","stop","toggle","<anonymous>"],"mappings":"AAA;iCCmB;YC4B;GDE;gCEG;GF2B;gCGG;GH4B;mCIG;GJgE;4BKG;GLiB;2BMG;GNU;6BOG;GPM;YCG;WOC;KPS;GDC;YCG;GDK;CDY"},"hasCjsExports":false},"type":"js/module"}]}