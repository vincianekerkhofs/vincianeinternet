{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"usePlaybackEngine\", {\n    enumerable: true,\n    get: function () {\n      return usePlaybackEngine;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[1], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  /**\n   * Unified playback engine that handles:\n   * - Beat progression (single source of truth)\n   * - Metronome audio (Web Audio API)\n   * - Synced callbacks for UI updates\n   */\n  const usePlaybackEngine = options => {\n    _s();\n    const {\n      bpm,\n      totalBeats,\n      loop,\n      soundEnabled,\n      volume = 0.5,\n      onBeatChange,\n      onLoopComplete\n    } = options;\n\n    // State\n    const [isPlaying, setIsPlaying] = (0, _react.useState)(false);\n    const [currentBeat, setCurrentBeat] = (0, _react.useState)(1);\n    const [audioReady, setAudioReady] = (0, _react.useState)(false);\n    const [needsUserInteraction, setNeedsUserInteraction] = (0, _react.useState)(false);\n\n    // Refs for audio\n    const audioContextRef = (0, _react.useRef)(null);\n\n    // Refs for timing - single source of truth\n    const playbackStartTimeRef = (0, _react.useRef)(0);\n    const schedulerIdRef = (0, _react.useRef)(null);\n    const lastScheduledBeatRef = (0, _react.useRef)(0);\n    const isPlayingRef = (0, _react.useRef)(false);\n    const soundEnabledRef = (0, _react.useRef)(soundEnabled);\n\n    // Keep soundEnabled ref in sync\n    (0, _react.useEffect)(() => {\n      soundEnabledRef.current = soundEnabled;\n    }, [soundEnabled]);\n\n    // Initialize AudioContext\n    const initAudio = (0, _react.useCallback)(async () => {\n      if (Platform.default.OS !== 'web') {\n        setAudioReady(true);\n        return true;\n      }\n      try {\n        if (!audioContextRef.current) {\n          const AudioContextClass = window.AudioContext || window.webkitAudioContext;\n          if (AudioContextClass) {\n            audioContextRef.current = new AudioContextClass();\n          }\n        }\n        if (audioContextRef.current) {\n          if (audioContextRef.current.state === 'suspended') {\n            await audioContextRef.current.resume();\n          }\n          setAudioReady(true);\n          setNeedsUserInteraction(false);\n          return true;\n        }\n      } catch (error) {\n        console.error('Failed to initialize audio:', error);\n        setNeedsUserInteraction(true);\n      }\n      return false;\n    }, []);\n\n    // Play a click sound at specific time\n    const playClick = (0, _react.useCallback)((time, isAccent = false) => {\n      if (!audioContextRef.current || !soundEnabledRef.current) return;\n      const ctx = audioContextRef.current;\n      try {\n        const osc = ctx.createOscillator();\n        const gainNode = ctx.createGain();\n        osc.connect(gainNode);\n        gainNode.connect(ctx.destination);\n        osc.frequency.value = isAccent ? 1000 : 800;\n        osc.type = 'sine';\n        const attackTime = 0.001;\n        const decayTime = 0.05;\n        const clickVolume = volume * (isAccent ? 1 : 0.7);\n        gainNode.gain.setValueAtTime(0, time);\n        gainNode.gain.linearRampToValueAtTime(clickVolume, time + attackTime);\n        gainNode.gain.exponentialRampToValueAtTime(0.001, time + attackTime + decayTime);\n        osc.start(time);\n        osc.stop(time + attackTime + decayTime + 0.01);\n      } catch (e) {\n        // Ignore audio errors\n      }\n    }, [volume]);\n\n    // Main scheduler - runs continuously while playing\n    const runScheduler = (0, _react.useCallback)(() => {\n      if (!isPlayingRef.current) return;\n      const ctx = audioContextRef.current;\n      const now = ctx ? ctx.currentTime : Date.now() / 1000;\n      const secondsPerBeat = 60.0 / bpm;\n      const scheduleAheadTime = 0.15; // Schedule 150ms ahead\n      const lookaheadMs = 25; // Check every 25ms\n\n      // Calculate current beat based on elapsed time\n      const elapsedTime = now - playbackStartTimeRef.current;\n      const currentBeatFloat = elapsedTime / secondsPerBeat + 1;\n      const currentBeatInt = Math.floor(currentBeatFloat);\n\n      // Handle loop or stop\n      if (currentBeatInt > totalBeats) {\n        if (loop) {\n          // Reset start time for new loop\n          playbackStartTimeRef.current = now;\n          lastScheduledBeatRef.current = 0;\n          onLoopComplete?.();\n        } else {\n          stop();\n          return;\n        }\n      }\n\n      // Update current beat for UI (clamped to valid range)\n      const displayBeat = Math.max(1, Math.min(totalBeats, currentBeatInt));\n      setCurrentBeat(displayBeat);\n      onBeatChange?.(displayBeat);\n\n      // Schedule upcoming metronome clicks\n      if (ctx) {\n        const lookAheadBeats = Math.ceil((elapsedTime + scheduleAheadTime) / secondsPerBeat);\n        for (let beat = lastScheduledBeatRef.current + 1; beat <= lookAheadBeats && beat <= totalBeats; beat++) {\n          const beatTime = playbackStartTimeRef.current + (beat - 1) * secondsPerBeat;\n          if (beatTime >= now && beatTime < now + scheduleAheadTime) {\n            const isAccent = (beat - 1) % 4 === 0;\n            playClick(beatTime, isAccent);\n            lastScheduledBeatRef.current = beat;\n          }\n        }\n\n        // Handle loop scheduling\n        if (loop && lookAheadBeats > totalBeats) {\n          // Schedule beats for next loop iteration\n          const nextLoopStartTime = playbackStartTimeRef.current + totalBeats * secondsPerBeat;\n          const beatsIntoNextLoop = Math.ceil((now + scheduleAheadTime - nextLoopStartTime) / secondsPerBeat);\n          for (let beat = 1; beat <= beatsIntoNextLoop; beat++) {\n            const beatTime = nextLoopStartTime + (beat - 1) * secondsPerBeat;\n            if (beatTime >= now && beatTime < now + scheduleAheadTime) {\n              const isAccent = (beat - 1) % 4 === 0;\n              playClick(beatTime, isAccent);\n            }\n          }\n        }\n      }\n\n      // Continue scheduling\n      schedulerIdRef.current = window.setTimeout(runScheduler, lookaheadMs);\n    }, [bpm, totalBeats, loop, playClick, onBeatChange, onLoopComplete]);\n\n    // Start playback\n    const start = (0, _react.useCallback)(async () => {\n      // Initialize audio on first interaction\n      await initAudio();\n      const ctx = audioContextRef.current;\n      const now = ctx ? ctx.currentTime : Date.now() / 1000;\n\n      // Set start time\n      playbackStartTimeRef.current = now;\n      lastScheduledBeatRef.current = 0;\n      isPlayingRef.current = true;\n      setIsPlaying(true);\n      setCurrentBeat(1);\n\n      // Start scheduler\n      runScheduler();\n    }, [initAudio, runScheduler]);\n\n    // Stop playback\n    const stop = (0, _react.useCallback)(() => {\n      isPlayingRef.current = false;\n      setIsPlaying(false);\n      if (schedulerIdRef.current !== null) {\n        clearTimeout(schedulerIdRef.current);\n        schedulerIdRef.current = null;\n      }\n      setCurrentBeat(1);\n    }, []);\n\n    // Toggle play/pause\n    const toggle = (0, _react.useCallback)(() => {\n      if (isPlayingRef.current) {\n        stop();\n      } else {\n        start();\n      }\n    }, [start, stop]);\n\n    // Cleanup on unmount\n    (0, _react.useEffect)(() => {\n      return () => {\n        isPlayingRef.current = false;\n        if (schedulerIdRef.current !== null) {\n          clearTimeout(schedulerIdRef.current);\n        }\n        if (audioContextRef.current) {\n          audioContextRef.current.close();\n          audioContextRef.current = null;\n        }\n      };\n    }, []);\n\n    // Restart scheduler when BPM changes during playback\n    (0, _react.useEffect)(() => {\n      if (isPlayingRef.current && schedulerIdRef.current !== null) {\n        // The scheduler will pick up the new BPM automatically\n        // since it reads from the options on each run\n      }\n    }, [bpm]);\n    return {\n      isPlaying,\n      currentBeat,\n      audioReady,\n      needsUserInteraction,\n      start,\n      stop,\n      toggle,\n      initAudio\n    };\n  };\n  _s(usePlaybackEngine, \"2AjTe0/Nn+FvqgovHjAYIbTWXag=\");\n});","lineCount":247,"map":[[13,2,20,0,"Object"],[13,8,20,0],[13,9,20,0,"defineProperty"],[13,23,20,0],[13,24,20,0,"exports"],[13,31,20,0],[14,4,20,0,"enumerable"],[14,14,20,0],[15,4,20,0,"get"],[15,7,20,0],[15,18,20,0,"get"],[15,19,20,0],[16,6,20,0],[16,13,20,0,"usePlaybackEngine"],[16,30,20,0],[17,4,20,0],[18,2,20,0],[19,2,1,0],[19,6,1,0,"_react"],[19,12,1,0],[19,15,1,0,"require"],[19,22,1,0],[19,23,1,0,"_dependencyMap"],[19,37,1,0],[20,2,1,65],[20,6,1,65,"_reactNativeWebDistExportsPlatform"],[20,40,1,65],[20,43,1,65,"require"],[20,50,1,65],[20,51,1,65,"_dependencyMap"],[20,65,1,65],[21,2,1,65],[21,6,1,65,"Platform"],[21,14,1,65],[21,17,1,65,"_interopDefault"],[21,32,1,65],[21,33,1,65,"_reactNativeWebDistExportsPlatform"],[21,67,1,65],[22,2,14,0],[23,0,15,0],[24,0,16,0],[25,0,17,0],[26,0,18,0],[27,0,19,0],[28,2,20,7],[28,8,20,13,"usePlaybackEngine"],[28,25,20,30],[28,28,20,34,"options"],[28,35,20,64],[28,39,20,69],[29,4,20,69,"_s"],[29,6,20,69],[30,4,21,2],[30,10,21,8],[31,6,22,4,"bpm"],[31,9,22,7],[32,6,23,4,"totalBeats"],[32,16,23,14],[33,6,24,4,"loop"],[33,10,24,8],[34,6,25,4,"soundEnabled"],[34,18,25,16],[35,6,26,4,"volume"],[35,12,26,10],[35,15,26,13],[35,18,26,16],[36,6,27,4,"onBeatChange"],[36,18,27,16],[37,6,28,4,"onLoopComplete"],[38,4,29,2],[38,5,29,3],[38,8,29,6,"options"],[38,15,29,13],[40,4,31,2],[41,4,32,2],[41,10,32,8],[41,11,32,9,"isPlaying"],[41,20,32,18],[41,22,32,20,"setIsPlaying"],[41,34,32,32],[41,35,32,33],[41,38,32,36],[41,42,32,36,"useState"],[41,48,32,44],[41,49,32,44,"useState"],[41,57,32,44],[41,59,32,45],[41,64,32,50],[41,65,32,51],[42,4,33,2],[42,10,33,8],[42,11,33,9,"currentBeat"],[42,22,33,20],[42,24,33,22,"setCurrentBeat"],[42,38,33,36],[42,39,33,37],[42,42,33,40],[42,46,33,40,"useState"],[42,52,33,48],[42,53,33,48,"useState"],[42,61,33,48],[42,63,33,49],[42,64,33,50],[42,65,33,51],[43,4,34,2],[43,10,34,8],[43,11,34,9,"audioReady"],[43,21,34,19],[43,23,34,21,"setAudioReady"],[43,36,34,34],[43,37,34,35],[43,40,34,38],[43,44,34,38,"useState"],[43,50,34,46],[43,51,34,46,"useState"],[43,59,34,46],[43,61,34,47],[43,66,34,52],[43,67,34,53],[44,4,35,2],[44,10,35,8],[44,11,35,9,"needsUserInteraction"],[44,31,35,29],[44,33,35,31,"setNeedsUserInteraction"],[44,56,35,54],[44,57,35,55],[44,60,35,58],[44,64,35,58,"useState"],[44,70,35,66],[44,71,35,66,"useState"],[44,79,35,66],[44,81,35,67],[44,86,35,72],[44,87,35,73],[46,4,37,2],[47,4,38,2],[47,10,38,8,"audioContextRef"],[47,25,38,23],[47,28,38,26],[47,32,38,26,"useRef"],[47,38,38,32],[47,39,38,32,"useRef"],[47,45,38,32],[47,47,38,54],[47,51,38,58],[47,52,38,59],[49,4,40,2],[50,4,41,2],[50,10,41,8,"playbackStartTimeRef"],[50,30,41,28],[50,33,41,31],[50,37,41,31,"useRef"],[50,43,41,37],[50,44,41,37,"useRef"],[50,50,41,37],[50,52,41,46],[50,53,41,47],[50,54,41,48],[51,4,42,2],[51,10,42,8,"schedulerIdRef"],[51,24,42,22],[51,27,42,25],[51,31,42,25,"useRef"],[51,37,42,31],[51,38,42,31,"useRef"],[51,44,42,31],[51,46,42,47],[51,50,42,51],[51,51,42,52],[52,4,43,2],[52,10,43,8,"lastScheduledBeatRef"],[52,30,43,28],[52,33,43,31],[52,37,43,31,"useRef"],[52,43,43,37],[52,44,43,37,"useRef"],[52,50,43,37],[52,52,43,46],[52,53,43,47],[52,54,43,48],[53,4,44,2],[53,10,44,8,"isPlayingRef"],[53,22,44,20],[53,25,44,23],[53,29,44,23,"useRef"],[53,35,44,29],[53,36,44,29,"useRef"],[53,42,44,29],[53,44,44,39],[53,49,44,44],[53,50,44,45],[54,4,45,2],[54,10,45,8,"soundEnabledRef"],[54,25,45,23],[54,28,45,26],[54,32,45,26,"useRef"],[54,38,45,32],[54,39,45,32,"useRef"],[54,45,45,32],[54,47,45,42,"soundEnabled"],[54,59,45,54],[54,60,45,55],[56,4,47,2],[57,4,48,2],[57,8,48,2,"useEffect"],[57,14,48,11],[57,15,48,11,"useEffect"],[57,24,48,11],[57,26,48,12],[57,32,48,18],[58,6,49,4,"soundEnabledRef"],[58,21,49,19],[58,22,49,20,"current"],[58,29,49,27],[58,32,49,30,"soundEnabled"],[58,44,49,42],[59,4,50,2],[59,5,50,3],[59,7,50,5],[59,8,50,6,"soundEnabled"],[59,20,50,18],[59,21,50,19],[59,22,50,20],[61,4,52,2],[62,4,53,2],[62,10,53,8,"initAudio"],[62,19,53,17],[62,22,53,20],[62,26,53,20,"useCallback"],[62,32,53,31],[62,33,53,31,"useCallback"],[62,44,53,31],[62,46,53,32],[62,58,53,44],[63,6,54,4],[63,10,54,8,"Platform"],[63,18,54,16],[63,19,54,16,"default"],[63,26,54,16],[63,27,54,17,"OS"],[63,29,54,19],[63,34,54,24],[63,39,54,29],[63,41,54,31],[64,8,55,6,"setAudioReady"],[64,21,55,19],[64,22,55,20],[64,26,55,24],[64,27,55,25],[65,8,56,6],[65,15,56,13],[65,19,56,17],[66,6,57,4],[67,6,59,4],[67,10,59,8],[68,8,60,6],[68,12,60,10],[68,13,60,11,"audioContextRef"],[68,28,60,26],[68,29,60,27,"current"],[68,36,60,34],[68,38,60,36],[69,10,61,8],[69,16,61,14,"AudioContextClass"],[69,33,61,31],[69,36,61,34,"window"],[69,42,61,40],[69,43,61,41,"AudioContext"],[69,55,61,53],[69,59,61,58,"window"],[69,65,61,64],[69,66,61,73,"webkitAudioContext"],[69,84,61,91],[70,10,62,8],[70,14,62,12,"AudioContextClass"],[70,31,62,29],[70,33,62,31],[71,12,63,10,"audioContextRef"],[71,27,63,25],[71,28,63,26,"current"],[71,35,63,33],[71,38,63,36],[71,42,63,40,"AudioContextClass"],[71,59,63,57],[71,60,63,58],[71,61,63,59],[72,10,64,8],[73,8,65,6],[74,8,67,6],[74,12,67,10,"audioContextRef"],[74,27,67,25],[74,28,67,26,"current"],[74,35,67,33],[74,37,67,35],[75,10,68,8],[75,14,68,12,"audioContextRef"],[75,29,68,27],[75,30,68,28,"current"],[75,37,68,35],[75,38,68,36,"state"],[75,43,68,41],[75,48,68,46],[75,59,68,57],[75,61,68,59],[76,12,69,10],[76,18,69,16,"audioContextRef"],[76,33,69,31],[76,34,69,32,"current"],[76,41,69,39],[76,42,69,40,"resume"],[76,48,69,46],[76,49,69,47],[76,50,69,48],[77,10,70,8],[78,10,71,8,"setAudioReady"],[78,23,71,21],[78,24,71,22],[78,28,71,26],[78,29,71,27],[79,10,72,8,"setNeedsUserInteraction"],[79,33,72,31],[79,34,72,32],[79,39,72,37],[79,40,72,38],[80,10,73,8],[80,17,73,15],[80,21,73,19],[81,8,74,6],[82,6,75,4],[82,7,75,5],[82,8,75,6],[82,15,75,13,"error"],[82,20,75,18],[82,22,75,20],[83,8,76,6,"console"],[83,15,76,13],[83,16,76,14,"error"],[83,21,76,19],[83,22,76,20],[83,51,76,49],[83,53,76,51,"error"],[83,58,76,56],[83,59,76,57],[84,8,77,6,"setNeedsUserInteraction"],[84,31,77,29],[84,32,77,30],[84,36,77,34],[84,37,77,35],[85,6,78,4],[86,6,79,4],[86,13,79,11],[86,18,79,16],[87,4,80,2],[87,5,80,3],[87,7,80,5],[87,9,80,7],[87,10,80,8],[89,4,82,2],[90,4,83,2],[90,10,83,8,"playClick"],[90,19,83,17],[90,22,83,20],[90,26,83,20,"useCallback"],[90,32,83,31],[90,33,83,31,"useCallback"],[90,44,83,31],[90,46,83,32],[90,47,83,33,"time"],[90,51,83,45],[90,53,83,47,"isAccent"],[90,61,83,64],[90,64,83,67],[90,69,83,72],[90,74,83,77],[91,6,84,4],[91,10,84,8],[91,11,84,9,"audioContextRef"],[91,26,84,24],[91,27,84,25,"current"],[91,34,84,32],[91,38,84,36],[91,39,84,37,"soundEnabledRef"],[91,54,84,52],[91,55,84,53,"current"],[91,62,84,60],[91,64,84,62],[92,6,86,4],[92,12,86,10,"ctx"],[92,15,86,13],[92,18,86,16,"audioContextRef"],[92,33,86,31],[92,34,86,32,"current"],[92,41,86,39],[93,6,88,4],[93,10,88,8],[94,8,89,6],[94,14,89,12,"osc"],[94,17,89,15],[94,20,89,18,"ctx"],[94,23,89,21],[94,24,89,22,"createOscillator"],[94,40,89,38],[94,41,89,39],[94,42,89,40],[95,8,90,6],[95,14,90,12,"gainNode"],[95,22,90,20],[95,25,90,23,"ctx"],[95,28,90,26],[95,29,90,27,"createGain"],[95,39,90,37],[95,40,90,38],[95,41,90,39],[96,8,92,6,"osc"],[96,11,92,9],[96,12,92,10,"connect"],[96,19,92,17],[96,20,92,18,"gainNode"],[96,28,92,26],[96,29,92,27],[97,8,93,6,"gainNode"],[97,16,93,14],[97,17,93,15,"connect"],[97,24,93,22],[97,25,93,23,"ctx"],[97,28,93,26],[97,29,93,27,"destination"],[97,40,93,38],[97,41,93,39],[98,8,95,6,"osc"],[98,11,95,9],[98,12,95,10,"frequency"],[98,21,95,19],[98,22,95,20,"value"],[98,27,95,25],[98,30,95,28,"isAccent"],[98,38,95,36],[98,41,95,39],[98,45,95,43],[98,48,95,46],[98,51,95,49],[99,8,96,6,"osc"],[99,11,96,9],[99,12,96,10,"type"],[99,16,96,14],[99,19,96,17],[99,25,96,23],[100,8,98,6],[100,14,98,12,"attackTime"],[100,24,98,22],[100,27,98,25],[100,32,98,30],[101,8,99,6],[101,14,99,12,"decayTime"],[101,23,99,21],[101,26,99,24],[101,30,99,28],[102,8,100,6],[102,14,100,12,"clickVolume"],[102,25,100,23],[102,28,100,26,"volume"],[102,34,100,32],[102,38,100,36,"isAccent"],[102,46,100,44],[102,49,100,47],[102,50,100,48],[102,53,100,51],[102,56,100,54],[102,57,100,55],[103,8,102,6,"gainNode"],[103,16,102,14],[103,17,102,15,"gain"],[103,21,102,19],[103,22,102,20,"setValueAtTime"],[103,36,102,34],[103,37,102,35],[103,38,102,36],[103,40,102,38,"time"],[103,44,102,42],[103,45,102,43],[104,8,103,6,"gainNode"],[104,16,103,14],[104,17,103,15,"gain"],[104,21,103,19],[104,22,103,20,"linearRampToValueAtTime"],[104,45,103,43],[104,46,103,44,"clickVolume"],[104,57,103,55],[104,59,103,57,"time"],[104,63,103,61],[104,66,103,64,"attackTime"],[104,76,103,74],[104,77,103,75],[105,8,104,6,"gainNode"],[105,16,104,14],[105,17,104,15,"gain"],[105,21,104,19],[105,22,104,20,"exponentialRampToValueAtTime"],[105,50,104,48],[105,51,104,49],[105,56,104,54],[105,58,104,56,"time"],[105,62,104,60],[105,65,104,63,"attackTime"],[105,75,104,73],[105,78,104,76,"decayTime"],[105,87,104,85],[105,88,104,86],[106,8,106,6,"osc"],[106,11,106,9],[106,12,106,10,"start"],[106,17,106,15],[106,18,106,16,"time"],[106,22,106,20],[106,23,106,21],[107,8,107,6,"osc"],[107,11,107,9],[107,12,107,10,"stop"],[107,16,107,14],[107,17,107,15,"time"],[107,21,107,19],[107,24,107,22,"attackTime"],[107,34,107,32],[107,37,107,35,"decayTime"],[107,46,107,44],[107,49,107,47],[107,53,107,51],[107,54,107,52],[108,6,108,4],[108,7,108,5],[108,8,108,6],[108,15,108,13,"e"],[108,16,108,14],[108,18,108,16],[109,8,109,6],[110,6,109,6],[111,4,111,2],[111,5,111,3],[111,7,111,5],[111,8,111,6,"volume"],[111,14,111,12],[111,15,111,13],[111,16,111,14],[113,4,113,2],[114,4,114,2],[114,10,114,8,"runScheduler"],[114,22,114,20],[114,25,114,23],[114,29,114,23,"useCallback"],[114,35,114,34],[114,36,114,34,"useCallback"],[114,47,114,34],[114,49,114,35],[114,55,114,41],[115,6,115,4],[115,10,115,8],[115,11,115,9,"isPlayingRef"],[115,23,115,21],[115,24,115,22,"current"],[115,31,115,29],[115,33,115,31],[116,6,117,4],[116,12,117,10,"ctx"],[116,15,117,13],[116,18,117,16,"audioContextRef"],[116,33,117,31],[116,34,117,32,"current"],[116,41,117,39],[117,6,118,4],[117,12,118,10,"now"],[117,15,118,13],[117,18,118,16,"ctx"],[117,21,118,19],[117,24,118,22,"ctx"],[117,27,118,25],[117,28,118,26,"currentTime"],[117,39,118,37],[117,42,118,41,"Date"],[117,46,118,45],[117,47,118,46,"now"],[117,50,118,49],[117,51,118,50],[117,52,118,51],[117,55,118,54],[117,59,118,59],[118,6,119,4],[118,12,119,10,"secondsPerBeat"],[118,26,119,24],[118,29,119,27],[118,33,119,31],[118,36,119,34,"bpm"],[118,39,119,37],[119,6,120,4],[119,12,120,10,"scheduleAheadTime"],[119,29,120,27],[119,32,120,30],[119,36,120,34],[119,37,120,35],[119,38,120,36],[120,6,121,4],[120,12,121,10,"lookaheadMs"],[120,23,121,21],[120,26,121,24],[120,28,121,26],[120,29,121,27],[120,30,121,28],[122,6,123,4],[123,6,124,4],[123,12,124,10,"elapsedTime"],[123,23,124,21],[123,26,124,24,"now"],[123,29,124,27],[123,32,124,30,"playbackStartTimeRef"],[123,52,124,50],[123,53,124,51,"current"],[123,60,124,58],[124,6,125,4],[124,12,125,10,"currentBeatFloat"],[124,28,125,26],[124,31,125,30,"elapsedTime"],[124,42,125,41],[124,45,125,44,"secondsPerBeat"],[124,59,125,58],[124,62,125,62],[124,63,125,63],[125,6,126,4],[125,12,126,10,"currentBeatInt"],[125,26,126,24],[125,29,126,27,"Math"],[125,33,126,31],[125,34,126,32,"floor"],[125,39,126,37],[125,40,126,38,"currentBeatFloat"],[125,56,126,54],[125,57,126,55],[127,6,128,4],[128,6,129,4],[128,10,129,8,"currentBeatInt"],[128,24,129,22],[128,27,129,25,"totalBeats"],[128,37,129,35],[128,39,129,37],[129,8,130,6],[129,12,130,10,"loop"],[129,16,130,14],[129,18,130,16],[130,10,131,8],[131,10,132,8,"playbackStartTimeRef"],[131,30,132,28],[131,31,132,29,"current"],[131,38,132,36],[131,41,132,39,"now"],[131,44,132,42],[132,10,133,8,"lastScheduledBeatRef"],[132,30,133,28],[132,31,133,29,"current"],[132,38,133,36],[132,41,133,39],[132,42,133,40],[133,10,134,8,"onLoopComplete"],[133,24,134,22],[133,27,134,25],[133,28,134,26],[134,8,135,6],[134,9,135,7],[134,15,135,13],[135,10,136,8,"stop"],[135,14,136,12],[135,15,136,13],[135,16,136,14],[136,10,137,8],[137,8,138,6],[138,6,139,4],[140,6,141,4],[141,6,142,4],[141,12,142,10,"displayBeat"],[141,23,142,21],[141,26,142,24,"Math"],[141,30,142,28],[141,31,142,29,"max"],[141,34,142,32],[141,35,142,33],[141,36,142,34],[141,38,142,36,"Math"],[141,42,142,40],[141,43,142,41,"min"],[141,46,142,44],[141,47,142,45,"totalBeats"],[141,57,142,55],[141,59,142,57,"currentBeatInt"],[141,73,142,71],[141,74,142,72],[141,75,142,73],[142,6,143,4,"setCurrentBeat"],[142,20,143,18],[142,21,143,19,"displayBeat"],[142,32,143,30],[142,33,143,31],[143,6,144,4,"onBeatChange"],[143,18,144,16],[143,21,144,19,"displayBeat"],[143,32,144,30],[143,33,144,31],[145,6,146,4],[146,6,147,4],[146,10,147,8,"ctx"],[146,13,147,11],[146,15,147,13],[147,8,148,6],[147,14,148,12,"lookAheadBeats"],[147,28,148,26],[147,31,148,29,"Math"],[147,35,148,33],[147,36,148,34,"ceil"],[147,40,148,38],[147,41,148,39],[147,42,148,40,"elapsedTime"],[147,53,148,51],[147,56,148,54,"scheduleAheadTime"],[147,73,148,71],[147,77,148,75,"secondsPerBeat"],[147,91,148,89],[147,92,148,90],[148,8,150,6],[148,13,150,11],[148,17,150,15,"beat"],[148,21,150,19],[148,24,150,22,"lastScheduledBeatRef"],[148,44,150,42],[148,45,150,43,"current"],[148,52,150,50],[148,55,150,53],[148,56,150,54],[148,58,150,56,"beat"],[148,62,150,60],[148,66,150,64,"lookAheadBeats"],[148,80,150,78],[148,84,150,82,"beat"],[148,88,150,86],[148,92,150,90,"totalBeats"],[148,102,150,100],[148,104,150,102,"beat"],[148,108,150,106],[148,110,150,108],[148,112,150,110],[149,10,151,8],[149,16,151,14,"beatTime"],[149,24,151,22],[149,27,151,25,"playbackStartTimeRef"],[149,47,151,45],[149,48,151,46,"current"],[149,55,151,53],[149,58,151,57],[149,59,151,58,"beat"],[149,63,151,62],[149,66,151,65],[149,67,151,66],[149,71,151,70,"secondsPerBeat"],[149,85,151,85],[150,10,153,8],[150,14,153,12,"beatTime"],[150,22,153,20],[150,26,153,24,"now"],[150,29,153,27],[150,33,153,31,"beatTime"],[150,41,153,39],[150,44,153,42,"now"],[150,47,153,45],[150,50,153,48,"scheduleAheadTime"],[150,67,153,65],[150,69,153,67],[151,12,154,10],[151,18,154,16,"isAccent"],[151,26,154,24],[151,29,154,27],[151,30,154,28,"beat"],[151,34,154,32],[151,37,154,35],[151,38,154,36],[151,42,154,40],[151,43,154,41],[151,48,154,46],[151,49,154,47],[152,12,155,10,"playClick"],[152,21,155,19],[152,22,155,20,"beatTime"],[152,30,155,28],[152,32,155,30,"isAccent"],[152,40,155,38],[152,41,155,39],[153,12,156,10,"lastScheduledBeatRef"],[153,32,156,30],[153,33,156,31,"current"],[153,40,156,38],[153,43,156,41,"beat"],[153,47,156,45],[154,10,157,8],[155,8,158,6],[157,8,160,6],[158,8,161,6],[158,12,161,10,"loop"],[158,16,161,14],[158,20,161,18,"lookAheadBeats"],[158,34,161,32],[158,37,161,35,"totalBeats"],[158,47,161,45],[158,49,161,47],[159,10,162,8],[160,10,163,8],[160,16,163,14,"nextLoopStartTime"],[160,33,163,31],[160,36,163,34,"playbackStartTimeRef"],[160,56,163,54],[160,57,163,55,"current"],[160,64,163,62],[160,67,163,66,"totalBeats"],[160,77,163,76],[160,80,163,79,"secondsPerBeat"],[160,94,163,94],[161,10,164,8],[161,16,164,14,"beatsIntoNextLoop"],[161,33,164,31],[161,36,164,34,"Math"],[161,40,164,38],[161,41,164,39,"ceil"],[161,45,164,43],[161,46,164,44],[161,47,164,45,"now"],[161,50,164,48],[161,53,164,51,"scheduleAheadTime"],[161,70,164,68],[161,73,164,71,"nextLoopStartTime"],[161,90,164,88],[161,94,164,92,"secondsPerBeat"],[161,108,164,106],[161,109,164,107],[162,10,166,8],[162,15,166,13],[162,19,166,17,"beat"],[162,23,166,21],[162,26,166,24],[162,27,166,25],[162,29,166,27,"beat"],[162,33,166,31],[162,37,166,35,"beatsIntoNextLoop"],[162,54,166,52],[162,56,166,54,"beat"],[162,60,166,58],[162,62,166,60],[162,64,166,62],[163,12,167,10],[163,18,167,16,"beatTime"],[163,26,167,24],[163,29,167,27,"nextLoopStartTime"],[163,46,167,44],[163,49,167,48],[163,50,167,49,"beat"],[163,54,167,53],[163,57,167,56],[163,58,167,57],[163,62,167,61,"secondsPerBeat"],[163,76,167,76],[164,12,168,10],[164,16,168,14,"beatTime"],[164,24,168,22],[164,28,168,26,"now"],[164,31,168,29],[164,35,168,33,"beatTime"],[164,43,168,41],[164,46,168,44,"now"],[164,49,168,47],[164,52,168,50,"scheduleAheadTime"],[164,69,168,67],[164,71,168,69],[165,14,169,12],[165,20,169,18,"isAccent"],[165,28,169,26],[165,31,169,29],[165,32,169,30,"beat"],[165,36,169,34],[165,39,169,37],[165,40,169,38],[165,44,169,42],[165,45,169,43],[165,50,169,48],[165,51,169,49],[166,14,170,12,"playClick"],[166,23,170,21],[166,24,170,22,"beatTime"],[166,32,170,30],[166,34,170,32,"isAccent"],[166,42,170,40],[166,43,170,41],[167,12,171,10],[168,10,172,8],[169,8,173,6],[170,6,174,4],[172,6,176,4],[173,6,177,4,"schedulerIdRef"],[173,20,177,18],[173,21,177,19,"current"],[173,28,177,26],[173,31,177,29,"window"],[173,37,177,35],[173,38,177,36,"setTimeout"],[173,48,177,46],[173,49,177,47,"runScheduler"],[173,61,177,59],[173,63,177,61,"lookaheadMs"],[173,74,177,72],[173,75,177,73],[174,4,178,2],[174,5,178,3],[174,7,178,5],[174,8,178,6,"bpm"],[174,11,178,9],[174,13,178,11,"totalBeats"],[174,23,178,21],[174,25,178,23,"loop"],[174,29,178,27],[174,31,178,29,"playClick"],[174,40,178,38],[174,42,178,40,"onBeatChange"],[174,54,178,52],[174,56,178,54,"onLoopComplete"],[174,70,178,68],[174,71,178,69],[174,72,178,70],[176,4,180,2],[177,4,181,2],[177,10,181,8,"start"],[177,15,181,13],[177,18,181,16],[177,22,181,16,"useCallback"],[177,28,181,27],[177,29,181,27,"useCallback"],[177,40,181,27],[177,42,181,28],[177,54,181,40],[178,6,182,4],[179,6,183,4],[179,12,183,10,"initAudio"],[179,21,183,19],[179,22,183,20],[179,23,183,21],[180,6,185,4],[180,12,185,10,"ctx"],[180,15,185,13],[180,18,185,16,"audioContextRef"],[180,33,185,31],[180,34,185,32,"current"],[180,41,185,39],[181,6,186,4],[181,12,186,10,"now"],[181,15,186,13],[181,18,186,16,"ctx"],[181,21,186,19],[181,24,186,22,"ctx"],[181,27,186,25],[181,28,186,26,"currentTime"],[181,39,186,37],[181,42,186,41,"Date"],[181,46,186,45],[181,47,186,46,"now"],[181,50,186,49],[181,51,186,50],[181,52,186,51],[181,55,186,54],[181,59,186,59],[183,6,188,4],[184,6,189,4,"playbackStartTimeRef"],[184,26,189,24],[184,27,189,25,"current"],[184,34,189,32],[184,37,189,35,"now"],[184,40,189,38],[185,6,190,4,"lastScheduledBeatRef"],[185,26,190,24],[185,27,190,25,"current"],[185,34,190,32],[185,37,190,35],[185,38,190,36],[186,6,191,4,"isPlayingRef"],[186,18,191,16],[186,19,191,17,"current"],[186,26,191,24],[186,29,191,27],[186,33,191,31],[187,6,193,4,"setIsPlaying"],[187,18,193,16],[187,19,193,17],[187,23,193,21],[187,24,193,22],[188,6,194,4,"setCurrentBeat"],[188,20,194,18],[188,21,194,19],[188,22,194,20],[188,23,194,21],[190,6,196,4],[191,6,197,4,"runScheduler"],[191,18,197,16],[191,19,197,17],[191,20,197,18],[192,4,198,2],[192,5,198,3],[192,7,198,5],[192,8,198,6,"initAudio"],[192,17,198,15],[192,19,198,17,"runScheduler"],[192,31,198,29],[192,32,198,30],[192,33,198,31],[194,4,200,2],[195,4,201,2],[195,10,201,8,"stop"],[195,14,201,12],[195,17,201,15],[195,21,201,15,"useCallback"],[195,27,201,26],[195,28,201,26,"useCallback"],[195,39,201,26],[195,41,201,27],[195,47,201,33],[196,6,202,4,"isPlayingRef"],[196,18,202,16],[196,19,202,17,"current"],[196,26,202,24],[196,29,202,27],[196,34,202,32],[197,6,203,4,"setIsPlaying"],[197,18,203,16],[197,19,203,17],[197,24,203,22],[197,25,203,23],[198,6,205,4],[198,10,205,8,"schedulerIdRef"],[198,24,205,22],[198,25,205,23,"current"],[198,32,205,30],[198,37,205,35],[198,41,205,39],[198,43,205,41],[199,8,206,6,"clearTimeout"],[199,20,206,18],[199,21,206,19,"schedulerIdRef"],[199,35,206,33],[199,36,206,34,"current"],[199,43,206,41],[199,44,206,42],[200,8,207,6,"schedulerIdRef"],[200,22,207,20],[200,23,207,21,"current"],[200,30,207,28],[200,33,207,31],[200,37,207,35],[201,6,208,4],[202,6,210,4,"setCurrentBeat"],[202,20,210,18],[202,21,210,19],[202,22,210,20],[202,23,210,21],[203,4,211,2],[203,5,211,3],[203,7,211,5],[203,9,211,7],[203,10,211,8],[205,4,213,2],[206,4,214,2],[206,10,214,8,"toggle"],[206,16,214,14],[206,19,214,17],[206,23,214,17,"useCallback"],[206,29,214,28],[206,30,214,28,"useCallback"],[206,41,214,28],[206,43,214,29],[206,49,214,35],[207,6,215,4],[207,10,215,8,"isPlayingRef"],[207,22,215,20],[207,23,215,21,"current"],[207,30,215,28],[207,32,215,30],[208,8,216,6,"stop"],[208,12,216,10],[208,13,216,11],[208,14,216,12],[209,6,217,4],[209,7,217,5],[209,13,217,11],[210,8,218,6,"start"],[210,13,218,11],[210,14,218,12],[210,15,218,13],[211,6,219,4],[212,4,220,2],[212,5,220,3],[212,7,220,5],[212,8,220,6,"start"],[212,13,220,11],[212,15,220,13,"stop"],[212,19,220,17],[212,20,220,18],[212,21,220,19],[214,4,222,2],[215,4,223,2],[215,8,223,2,"useEffect"],[215,14,223,11],[215,15,223,11,"useEffect"],[215,24,223,11],[215,26,223,12],[215,32,223,18],[216,6,224,4],[216,13,224,11],[216,19,224,17],[217,8,225,6,"isPlayingRef"],[217,20,225,18],[217,21,225,19,"current"],[217,28,225,26],[217,31,225,29],[217,36,225,34],[218,8,226,6],[218,12,226,10,"schedulerIdRef"],[218,26,226,24],[218,27,226,25,"current"],[218,34,226,32],[218,39,226,37],[218,43,226,41],[218,45,226,43],[219,10,227,8,"clearTimeout"],[219,22,227,20],[219,23,227,21,"schedulerIdRef"],[219,37,227,35],[219,38,227,36,"current"],[219,45,227,43],[219,46,227,44],[220,8,228,6],[221,8,229,6],[221,12,229,10,"audioContextRef"],[221,27,229,25],[221,28,229,26,"current"],[221,35,229,33],[221,37,229,35],[222,10,230,8,"audioContextRef"],[222,25,230,23],[222,26,230,24,"current"],[222,33,230,31],[222,34,230,32,"close"],[222,39,230,37],[222,40,230,38],[222,41,230,39],[223,10,231,8,"audioContextRef"],[223,25,231,23],[223,26,231,24,"current"],[223,33,231,31],[223,36,231,34],[223,40,231,38],[224,8,232,6],[225,6,233,4],[225,7,233,5],[226,4,234,2],[226,5,234,3],[226,7,234,5],[226,9,234,7],[226,10,234,8],[228,4,236,2],[229,4,237,2],[229,8,237,2,"useEffect"],[229,14,237,11],[229,15,237,11,"useEffect"],[229,24,237,11],[229,26,237,12],[229,32,237,18],[230,6,238,4],[230,10,238,8,"isPlayingRef"],[230,22,238,20],[230,23,238,21,"current"],[230,30,238,28],[230,34,238,32,"schedulerIdRef"],[230,48,238,46],[230,49,238,47,"current"],[230,56,238,54],[230,61,238,59],[230,65,238,63],[230,67,238,65],[231,8,239,6],[232,8,240,6],[233,6,240,6],[234,4,242,2],[234,5,242,3],[234,7,242,5],[234,8,242,6,"bpm"],[234,11,242,9],[234,12,242,10],[234,13,242,11],[235,4,244,2],[235,11,244,9],[236,6,245,4,"isPlaying"],[236,15,245,13],[237,6,246,4,"currentBeat"],[237,17,246,15],[238,6,247,4,"audioReady"],[238,16,247,14],[239,6,248,4,"needsUserInteraction"],[239,26,248,24],[240,6,249,4,"start"],[240,11,249,9],[241,6,250,4,"stop"],[241,10,250,8],[242,6,251,4,"toggle"],[242,12,251,10],[243,6,252,4,"initAudio"],[244,4,253,2],[244,5,253,3],[245,2,254,0],[245,3,254,1],[246,2,254,2,"_s"],[246,4,254,2],[246,5,20,13,"usePlaybackEngine"],[246,22,20,30],[247,0,20,30],[247,3]],"functionMap":{"names":["<global>","usePlaybackEngine","useEffect$argument_0","initAudio","playClick","runScheduler","start","stop","toggle","<anonymous>"],"mappings":"AAA;iCCmB;YC4B;GDE;gCEG;GF2B;gCGG;GH4B;mCIG;GJgE;4BKG;GLiB;2BMG;GNU;6BOG;GPM;YCG;WOC;KPS;GDC;YCG;GDK;CDY"},"hasCjsExports":false},"type":"js/module"}]}